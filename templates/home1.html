<!DOCTYPE html>
<html lang="en">

<head>
     <meta charset="UTF-8">
     <meta http-equiv="X-UA-Compatible" content="IE=edge">
     <meta name="viewport" content="width=device-width, initial-scale=1.0">
     <link rel="shortcut icon" href="static/images/favicon.ico" type="image/x-icon">
     <title>DIU BUS</title>
     <!-- CSS -->
     <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet"
          integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
     <link rel="stylesheet" type="text/css" href="../static/css/style.css">
     <link rel="stylesheet" type="text/css" href="../static/css/home1.css">
     <link rel="stylesheet" href="{{url_for('static',filename='css/style.css')}}">
     <link rel="stylesheet" href="{{url_for('static',filename='css/home1.css')}}">
     <!-- JavaScript -->
     <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js"
          integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM"
          crossorigin="anonymous"></script>
     <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css"
          integrity="sha512-z3gLpd7yknf1YoNbCzqRKc4qyor8gaKU1qmn+CShxbuBusANI9QpRohGBreCFkKxLhei6S9CQXFEbbKuqLg0DA=="
          crossorigin="anonymous" referrerpolicy="no-referrer" />
</head>

<body>
     <div class="main_body">
          <div class="width_center">
               <img class="logo" src="static/images/logo.png" alt="">
          </div>

          {% with messages = get_flashed_messages() %}
          {% if messages %}
          <div class="modal" tabindex="-1" id="exampleModal">
               <div class="modal-dialog">
                    <div class="modal-content">
                         <div class="modal-header">
                              <button type="button" class="btn-close" data-bs-dismiss="modal"
                                   aria-label="Close"></button>
                         </div>
                         <div class="modal-body">
                              <p>{{msg}}</p>
                         </div>
                         <div class="modal-footer">
                              <button type="button" class="btn btn-color" data-bs-dismiss="modal">Close</button>

                         </div>
                    </div>
               </div>
          </div>
          {% endif %}
          {% endwith %}
          <div class="main_area">
               <!-- <a href="Dashboard.html" class="a_button width_center">
                    <div class="width_center width1 user">
                         <div class="pps">
                              <img src="../static/images/profile.png" alt="">
                         </div>
                         <div class="nameinp">
                              <input type="submit" value="{{name}}" class="nameid">
                              <input type="submit" value="{{id}}" class="nameid">
                         </div>
                    </div>
               </a> -->
               <div class="profile">
                    <i class="fa-solid fa-user"></i>
                    <div class="sub-menu-wrap">
                         <div class="sub-menu">
                              <div class="username">
                                   <p>{{name}}</p>
                                   <p>{{id}}</p>
                              </div>
                              <hr>
                              <a href="ChangeName.html"> <i class="fa-solid fa-pen-to-square"></i>Change Name</a>
                              <a href="ChangePassword.html"> <i class="fa-solid fa-pen-to-square"></i>Change Password</a>
                              <hr>
                              <a href="/logout"><i class="fa-solid fa-right-from-bracket"></i>Log Out</a>
                              <hr>
                         </div>
                    </div>
               </div>

               <div class="default_route">
                    <div class="first_half">
                         <input type="submit" class="width_center" value="{{Froms}}" id="location1">
                         <button onclick="swapValues()" class="swap"><img src="static/images/swap_icon.png" alt=""
                                   srcset=""></button>
                         <input type="submit" class="width_center" value="{{Tos}}" id="location2">
                    </div>
                    <button onclick="searchButtonClicked()" class="search"><img src="static/images/search_icon.png"
                              alt="" srcset=""></button>
               </div>

               <script>
                    function swapValues() {
                         let input1 = document.getElementById("location1");
                         let input2 = document.getElementById("location2");

                         let input1Value = input1.value;
                         let input2Value = input2.value;

                         input1.value = input2Value;
                         input2.value = input1Value;
                    }
                    function searchButtonClicked() {
                         let location1 = document.getElementById("location1").value;
                         let location2 = document.getElementById("location2").value;

                         let url = `/SearchForAvailableBus?location1=${encodeURIComponent(location1)}&location2=${encodeURIComponent(location2)}`;
                         window.location.href = url;
                    }
               </script>
               <p class="or width_center">Or</p>
               <div class="width_center">
                    <a href="TryDifferentRoute.html" class="a_button">
                         <button class="green_button">Try a different route</button>
                    </a>
               </div>
               <div class="width_center">
                    <div class="width_space-between width1">
                         <a href="ScheduleStudentView.html" class="a_box">
                              <div class="green_box">
                                   <img class="box_image" src="static/images/schedule.png" alt="">
                                   <div>Schedule</div>
                              </div>
                         </a>
                         <a href="Status.html" class="a_box">
                              <div class="red_box">
                                   <img class="box_image" src="static/images/status.png" alt="">
                                   <div>Status</div>
                              </div>
                         </a>
                    </div>

               </div>
               <div class="width_center">
                    <div class="width_space-between width2">
                         <p>Last Ticket</p>
                         <button class="littlegreen_button radius">History</button>
                    </div>
               </div>
               {% if last_ticket is not none %}
               <div class="ticket ">
                    <div class="width_center">
                         <div class="width_space-between Ticket_width">

                              <div class="location1 location">{{Froms}}</div>
                              <img src="static/images/green_round.png" alt="" srcset="" class="round_image">
                              <hr class="line1">
                              <img src="static/images/red_round.png" alt="" srcset="" class="round_image">
                              <div class="location2 location">{{Tos}}</div>
                         </div>

                    </div>

                    <div class="width_center">
                         <div class="width_space-between Ticket_width">
                              <div class="">1:40</div>
                              <div class="">2:10</div>
                         </div>
                    </div>
                    <div class="width_center">
                         <div class="width_space-between Ticket_width">
                              <div class="">{{last_ticket[5]}}</div>
                              <div class="">Currnet Slot : 1</div>
                         </div>
                    </div>

                    <div class="width_center">
                         <hr class="line4">
                    </div>
                    <div class="width_center m10">
                         <div class="width_space-between Ticket_width">
                              <div class="">Status</div>
                              <div class="div">
                                   <button class="littlegreen_button ">Paid</button>
                                   <button class="littlegreen_button">Active</button>
                              </div>
                         </div>
                    </div>
               </div>
               {% else %}
               <div class="ticket ">
                    <div class="width_center">
                         <div class="width_space-between Ticket_width">
                              <p>No Tickets found for user_id: {{ id }}</p>
                         </div>
                    </div>
               </div>

               {% endif %}
               <!-- <div class="width_center">
                    <a class="a_button" href="index.html"><button class="green_button">Logout</button></a>
               </div> -->
          </div>
          <div class="width_center mb"><a href="https://chat.whatsapp.com/JbQuH9SHvG5LOBk9p2RiCX"><button
                         class="green_button">See Live Location</button></a></div>
     </div>
     <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.4/jquery.min.js"
          integrity="sha512-pumBsjNRGGqkPzKHndZMaAG+bir374sORyzM3uulLV14lN5LyykqNk8eEeUlUkB3U0M4FApyaHraT65ihJhDpQ=="
          crossorigin="anonymous" referrerpolicy="no-referrer">
          </script>

     <script>
          $(document).ready(function () {
               console.log("Windows loaded");
               $("#exampleModal").modal("show");
          })
     </script>
</body>

</html>